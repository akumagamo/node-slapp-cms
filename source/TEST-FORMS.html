
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
<style>
#message{
font-weight:bold;
color:green;
}
</style>
<h2> Newsletter registration </h2>
<label for="email">E-mail:<input id="email" /></label><br />
<div id="message" class="hidden">Erfolgreich gespeichert</div>
<button id="submit">Submit</button>

<script>

window.addEventListener("load",()=>{
    $("#submit").click(e => 
        $.post("/form1", '{"dataType":"form1", "value":{"email":"' + $("#email").val()+'"}}').done(e=>{
            console.info(e);
            $("#message").toggleClass("hidden");
        })
    );
});

</script>


<div>
    <label>Email: </label><br />
    <input id="email">
    <button id="submitButton">save</button>
    <script>
        let emailFormField = document.getElementById("email");
        document.getElementById("submitButton").addEventListener("click", e =>{
            console.info("start");
            let xhr = new XMLHttpRequest();
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.open("POST", "/test-form2", true);
            xhr.onreadystatechange = function () {
                console.log(xhr.responseText);
                if(xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                    console.log("DONE");
                }
            };
            xhr.send(JSON.stringify({value: {email: emailFormField.value } }));
        });

        
        method = "GET",
        url = "https://developer.mozilla.org/";

        
        xhr.onreadystatechange = function () {
            if(xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                console.log(xhr.responseText);
            }
        };
        xhr.send();

    </script>
</div>